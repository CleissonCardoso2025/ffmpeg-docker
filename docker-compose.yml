# NAME: docker-compose.yml
# AUTH: Ryan McCartney <ryan@mccartney.info>
# DATE: 08/01/2023
# DESC: FFmpeg compiled with configurable options link BMD Decklink or Newtec NDI

version: "3.8"

services:
    ffmpeg:
        container_name: ffmpeg
        build:
            context: "."
            args:
                DECKLINK_SUPPORT: "true"
                DECLINK_SDK_URL: "https://sw.blackmagicdesign.com/DeckLink/v12.4.2/Blackmagic_DeckLink_SDK_12.4.2.zip?Key-Pair-Id=APKAJTKA3ZJMJRQITVEA&Signature=QgiA0d0hTh75jP8mZurfIYEvE9bISRVIdFiQVb1tm5CwPYSMs65NGvBNlyV5+GuqVXeHkYGLQSV5Wqt2oTkXMosuZhfpm6ojbkSxj/XIzyu7NWeRNulVYTzoBtJcPNZYi+SqrWZf1OUk1LyhV5QHANIKuc8ryHYvnFUyCrzYhIobWxz5c1L2xoYnFV+Jd9Up5V8pxu7BxHNyMgh6/KySe9pRgxliu+6lWM/btnuRNA0BrMLCYoT042NDux3EJwSvri41kC2x7HtC2JDE8xgJA601OS4Bx4qLgOS4OaKOsVWh0hoxWkGfX1Bozbuh0wEDzlJ/9/tZDSJNqRZlTNTanw==&Expires=1673227885"
                NDI_SUPPORT: "false"
                NDI_SDK_URL: "https://downloads.ndi.tv/SDK/NDI_SDK_Linux/Install_NDI_SDK_v5_Linux.tar.gz"
        restart: always
        volumes:
            - /dev/blackmagic/dv0:/dev/blackmagic/dv0
            - ./:/home/node/app
        environment:
            NODE_ENV: "development"
            PORT: 80
        ports:
            - 80:80
            - 5004:5004
