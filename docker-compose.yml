# NAME: docker-compose.yml
# AUTH: Ryan McCartney <ryan@mccartney.info>
# DATE: 08/01/2023
# DESC: FFmpeg compiled with configurable options link BMD Decklink or Newtec NDI

version: "3.8"

services:
    ffmpeg:
        container_name: ffmpeg
        build:
            context: "."
            args:
                DECKLINK_SUPPORT: "true"
                DECLINK_SDK_URL: "https://sw.blackmagicdesign.com/DeckLink/v12.4.2/Blackmagic_DeckLink_SDK_12.4.2.zip?Key-Pair-Id=APKAJTKA3ZJMJRQITVEA&Signature=Mph/yOHPbYgA1voU4yzqDetm26Nugw12gMlklCqfrs0qPSfCLLKTZmlCByZvAR5OiAVaRxVqc/6CjOFgsy9R1vT4YWYERuo9NmCZJOESYTh1cxvVKtYhkJmBHoSd7+1RTjX8D3rWVDRR5Lgcwq3wGllsHxpfFqzrfD1GkUoRJqfGGIX08LzQUBhZPthXQQJyKUeA5HxTV1M8G70nkMIOTbmmxUvBTNqynJm3P5kMUyJIq08G+I/mALofhNZPb5a/3qjxoaJ9jq16r1rPtVzrp7V3nDDjCZPZphfFgRx9k0R67OUzw25oxdDD3ZxBdK/XSI/4jP2pCztaq9xgQPcQdg==&Expires=1688397730"
                DECKLINK_DRIVER_URL: "https://sw.blackmagicdesign.com/DesktopVideo/v12.4.1/Blackmagic_Desktop_Video_Linux_12.4.1.tar.gz?Key-Pair-Id=APKAJTKA3ZJMJRQITVEA&Signature=aWHPJ+Q8ZhMOnBnxECWE170sc7bWVJt3qriUxMvCTV8J8EO+dIXDhetlqy1lAs+/OViH1ipubZDUpceJEwLcsav6cTUYX/8mjLXEaq01hTy4ckGlX61OMukt5EBxboBa2Tjm65SktVQcRhuW4VgoAAH/ipjkhTEVW5SEdLr9FZqDgP2jIMN6NgiiVz6B71dIf+BnCzdWAHxLJSDStd3LEGAc8DkmFVDTVElBZvFRHRb3Fqc6dVOWhARTKZeEUGbJRhbaGk+rOsR2/0XdRanIXz/f4ybQEVS1z/uN/eFQRFmolZzA01r4rHewIl1LV5mxux7cx3AZmVbeE0CZIW6OtA==&Expires=1688397756"
                DECKLINK_DRIVER_VERSION: "12.4.1"
                NDI_SUPPORT: "false"
                NDI_SDK_URL: "https://downloads.ndi.tv/SDK/NDI_SDK_Linux/Install_NDI_SDK_v5_Linux.tar.gz"
        restart: always
        volumes:
            - ./:/home/node/app
        devices:
            - /dev/blackmagic/dv0:/dev/blackmagic/dv0
        environment:
            NODE_ENV: "development"
            PORT: 80
        ports:
            - 3000:80
            - 5004:5004
